<% include partials/header %>

<div class="main">
    <div class="row justify-content-center">
        <div class="col-12 col-sm-8 p-3 grey-bg"> 
            <h1 align="center">Add New Commitment</h1>
            
            <label  for="name" 
                    class="add-new">Commitment item:</label>
            <input type="text" 
                   id="name" 
                   class="add-new" 
                   oninput="validateName('name')"
                   onpropertychange="validateName('name')"
                   onkeyup="validateName('name');"
                   placeholder="Commitment Item Name">
            <label  for="category" 
                    class="add-new">Category:</label>
            <select id="category" 
                    class="form-control d-inline rounded-0 add-new">
                <option>General</option>
                <option>Utilities</option>
                <option>Luxury</option>
                <option>Kids</option>
            </select>
            <label  for="quantity" 
                    class="add-new w-50">Quantity:</label>
            <label  for="frequency" 
                    class="add-new add-new-label-right">Frequency:</label>
            <input  type="number" 
                    id="quantity" 
                    class="add-new w-50" 
                    step="0.01" 
                    pattern="\d+"
                    oninput="validateQuantity('quantity')"
                    onpropertychange="validateQuantity('quantity')"
                    onkeyup="validateQuantity('quantity');"
                    placeholder="Quantity..">
            <select id="frequency"
                    onchange="updateLengthVisibility('frequency', 'lengthHolder')"
                    class="form-control w-25 d-inline rounded-0 add-new-right">
                <option>Once Only</option>
                <option>Daily</option>
                <option>Weekly</option>
                <option>Monthly</option>
                <option>Annual</option>
            </select>

            <label  for="start" 
                    class="add-new">Start Date:</label>
            <input  id="start" 
                    class="add-new" 
                    oninput="validateStart('start')"
                    onpropertychange="validateStart('start')"
                    onkeyup="validateStart('start');"
                    type="date">
            <div id='lengthHolder' class='lengthHolder'>
                <label  for="length" 
                        class="add-new">Commitment Length:</label>
                <input  type="number" 
                        id="length" 
                        class="add-new w-50" 
                        pattern="\d+"
                        oninput="validateLength('frequency', 'length')"
                        onpropertychange="validateLength('frequency', 'lenght')"
                        onkeyup="validateLength('frequency', 'length');"
                        placeholder="Length">
                <select id="lengthUnit"
                        class="form-control w-25 d-inline rounded-0 add-new-right">
                    <option>Days</option>
                    <option>Weeks</option>
                    <option>Months</option>
                    <option>Years</option>
                </select>
            </div>
            <button id="submitButton" 
                    onclick="submitAddNewCommitment()"
                    class="btn btn-primary mt-3 add-new">Submit</button>
                <div id="loadStatus"></div>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-12 col-sm-8 p-3 mt-5 grey-bg"> 
                <table>
                <thead>
                    <tr>
                        <th colspan="2">Current Commitments</th>
                    </tr>
                </thead>
            </table>
            <table id="commitmentsTable">
            </table>
            <div class="flat-loader">
                <div class="rect1"></div>
                <div class="rect2"></div>
                <div class="rect3"></div>
                <div class="rect4"></div>
                <div class="rect5"></div>
            </div>
        </div>
    </div>
</div>


<script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/finance.js" type="text/javascript"></script>
<script>
    prioritiseLink('commitmentsLink');
    $('#lengthHolder').hide();
    updateCommitmentsTable('commitmentsTable');
</script>

<% include partials/footer %>
